<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>固定勤务</title>
    <link rel="stylesheet" href="../../asset/css/common.css">
    <link rel="stylesheet" href="../../asset/introduce/zTree/css/zTreeStyle/zTreeStyle.css">
    <link rel="stylesheet" href="./fixed-duty.css">
</head>

<body>
<!--头部-->
<div class="header">
    <a class="header-lt" id="header" href="../index/index.html"></a>
    <div class="header-rt">
        <ul>
            <li class="notice-wrapper">
                <img class="notice-icon" src="../../asset/img/notice.png" alt="通知">
            </li>
            <li class="user-notice">
                <div id="user-operate" class="user-operate">
                    <a href="javascript:;">
                      <img class="user-img" src="../../asset/img/logo.png" alt="头像">
                      管理
                    </a>
                    <a href="javascript:;" class="exit" title="退出">退出</a>
                </div>
            </li>
        </ul>
    </div>
</div>
<!--侧边栏-->
<iframe id="zhanwei-c" src="about:blank" frameborder="0" marginheight="0"
marginwidth="0"
style="position: fixed;display: block;top: 75px;left: -300px;width: 300px;height: 600px;z-index: 90;background: transparent;"></iframe>
<div class="aside">
  <div class="aside-bg">
    <i class="aside-bg-lt"></i>
    <i class="aside-bg-mt"></i>
    <i class="aside-bg-mt-img"></i>
    <i class="aside-bg-rt"></i>
    <i class="aside-bg-lm"></i>
    <i class="aside-bg-mm"></i>
    <i class="aside-bg-rm"></i>
    <i class="aside-bg-lb"></i>
    <i class="aside-bg-mb"></i>
    <i class="aside-bg-rb"></i>
  </div>
  <div class="menu-tree">
      <ul id="menu-tree" class="ztree"></ul>
  </div>
  <a href="javascript:;" id="showFlag" class="icon-fold unfolded"></a>
</div>
<!-- 固定勤务 -->
<dl class="wrapper">
    <dt>
        <span class="page-title">固定勤务</span>
    </dt>
    <dd>
        <div class="duty-content">
            <!--<ul><li class="duty-content-item">-->
                <!--<div class="duty-detail">-->
                    <!--<img class="duty-man-img" src="../../asset/img/avatar.png" alt="照片">-->
                    <!--<p>张建国</p>-->
                    <!--<p>七中队3班</p>-->
                <!--</div>-->
                <!--<div class="duty-video"></div>-->
            <!--</li></ul>-->
        </div>
    </dd>
</dl>
<script src="../../asset/js/jquery.min.js"></script>
<script src="../../asset/js/config.js"></script>
<script src="../../asset/js/utils.js"></script>
<script src="./fixed-duty.js"></script>
<script src="../../asset/js/aside.js"></script>
<script src="../../asset/introduce/zTree/js/jquery.ztree.all.min.js"></script>
<script>
    $.ajax({
        type: 'GET',
        dataType: 'json',
        contentType: 'application/json',
        url: $ctx + '/fixed_duty/dutyInfo',
        success: function (res) {
            if (res.code == 0 && res.data) {
                var data = res.data.dutyInfo
                var html = ''
                $.each(data, function (index, item) {
                    var dutyPersonTeam = data[index].dutyPersonTeam || '',
                        dutyPersonName = data[index].dutyPersonName || '',
                        dutyPersonPost = data[index].dutyPersonPost || '',
                        dutyPersonPic = data[index].dutyPersonPic || '../../asset/img/avatar.png',
                        rtspUrl = data[index].rtspUrl || '';
                    html += '<ul class="duty-content-item"><li>' +
                      '<div class="duty-detail"><img class="duty-man-img" src="'+dutyPersonPic+'" alt="照片">' +
                      '<p>'+dutyPersonName+'</p><p>'+dutyPersonPost+'</p></div>' +
                      '<div class="duty-video">' +
                      '<OBJECT classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921" id="vlc'+(index+1)+'" codebase="" width="100%" height="100%" events="True">' +
                      '<param name="AutoLoop" value="False" /><param name="AutoPlay" value="True" />' +
                      '<param name="Time" value="True" />' +
                      '<param name="ShowDisplay" value="True" />' +
                      '<param name="Controls" value="False">' +
                      '<EMBED pluginspage="http://www.videolan.org" type="application/x-vlc-plugin" version="VideoLAN.VLCPlugin.2" width="100%" height="85%" text="Waiting for video" name="vlc"></EMBED>' +
                      '</OBJECT></div></li></ul>'
                })
                $('.duty-content').html(html)
                var itemWidth = $('.duty-video').width();
                $('.duty-video').css('height', itemWidth+"px");

                for (var i = 0; i < data.length; i++){
                    play(data[i]["rtspUrl"], "vlc"+(i+1));
                    $('#vlc'+(i+1)).css({width: '100%', height: '100%'})
                }
            }
        },
        error: function (err) {
            console.log(err)
        }
    })

</script>
</body>

</html>