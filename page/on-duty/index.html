<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>武警智慧磐石执勤安保信息管理平台</title>
    <!-- <title>执勤排班</title> -->
    <link rel="stylesheet" href="../../asset/introduce/layui/css/layui.css">
    <link rel="stylesheet" href="../../asset/css/reset.css">
    <link rel="stylesheet" href="../../asset/css/common.css">
    <link rel="stylesheet" href="./index.css">
</head>

<body>
  <!--头部-->
  <div class="header">
    <a class="header-lt" id="header" href="../index/index.html"></a>
    <div class="header-rt">
      <ul>
        <li class="notice-wrapper">
          <img class="notice-icon" src="../../asset/img/notice.png" alt="通知">
        </li>
        <li class="user-notice">
          <div id="user-operate" class="user-operate">
            <a href="javascript:;">
              <img class="user-img" src="../../asset/img/logo.png" alt="头像">
              管理
            </a>
            <a href="javascript:;" class="exit" title="退出">退出</a>
          </div>
        </li>
      </ul>
    </div>
  </div>


    <!-- 主内容：报警 -->
    <dl class="wrapper">
      <dt>
        <!--<span class="page-title">执勤排班</span>-->
        <div class="tabview">
          <ul class="tabtop">
            <li>
              <a href="../fixed-duty/fixed-duty.html">固定勤务</a>
            </li>
            <li class="on">
              <a href="javascript:void(0)">执勤排班</a>
            </li>
          </ul>
        </div>

        <div class="layui-form right-form">
          <div class="layui-form-item ">
              <div class="layui-inline">
                <label class="layui-form-label">排班类型：</label>
                <div class="layui-input-inline">
                  <select id="scheduleType" name="scheduleType">
                    <option value=""></option>
                    <option value="1">四包一</option>
                    <option value="2">五包一</option>
                    <option value="3">六包一</option>
                  </select>
                </div>
              </div>
            <div class="layui-inline">
              <label class="layui-form-label">执勤时间：</label>
              <div class="layui-input-inline">
                <input type="text" name="dutyTime" id="dutyTime" autocomplete="off" class="layui-input js-laydate">
              </div>
            </div>

            <div class="layui-inline">
              <button class="layui-btn layui-btn-normal js-query">查询</button>
              <button class="layui-btn layui-btn-primary js-btnEdit">修改</button>
            </div>

          </div>
        </div>
      </dt>

      <dd>
        <form class="layui-form">
        <table id="dutyList" class="table">
          <colgroup>
            <col width="33">
            <col width="130">
            <col>
            <col>
            <col>
            <col>
            <col>
            <col>
            <col>
            <col>
            <col>
            <col>
          </colgroup>
          <thead>
            <tr>
              <th colspan="2"><p>时间/班次</p></th>
              <th><p>网络查勤员</p></th>
              <th><p>一号岗</p></th>
              <th><p>二号岗</p></th>
              <th><p>三号岗</p></th>
              <th><p>四号岗</p></th>
              <th><p>五号岗</p></th>
              <th><p>六号岗</p></th>
              <th><p>七号岗</p></th>
              <th><p>八号岗</p></th>
              <th><p>应急组</p></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th rowspan="7" class="font-16">昼<br>间</th>
              <td><p>
                <span class="schedule">第一班</span>
                <span class="duty-time">6时-8时</span>
              </p></td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <th rowspan="15" class="js-urgent">
                <p class="js-onduty"></p>
                <div class="text-area hide-elm js-textarea">
                  <div class="show-select"></div>
                  <a href="javascript:;" class="btn-select">选择</a>
                  <ul class="select-area">
                    <li></li>
                  </ul>
                </div>
              </th>
            </tr>
            <tr>
              <td><p>
                <span class="schedule">第二班</span>
                <span class="duty-time">8时-10时</span>
              </p></td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
            </tr>
            <tr>
              <td><p>
                <span class="schedule">第三班</span>
                <span class="duty-time">10时-12时</span>
              </p></td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
            </tr>
            <tr>
              <td><p>
                <span class="schedule">第四班</span>
                <span class="duty-time">12时-14时</span>
              </p></td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
            </tr>
            <tr>
              <td><p>
                <span class="schedule">第五班</span>
                <span class="duty-time">14时-16时</span>
              </p></td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
            </tr>
            <tr>
              <td><p>
                <span class="schedule">第六班</span>
                <span class="duty-time">16时-18时</span>
              </p></td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
            </tr>
            <tr>
              <td><p>
                <span class="schedule">第七班</span>
                <span class="duty-time">18时-20时</span>
              </p></td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
            </tr>

            <tr>
              <th rowspan="5" class="font-16">夜<br>间</th>
              <td><p>
                <span class="schedule">第一班</span>
                <span class="duty-time">20时-22时</span>
              </p></td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
            </tr>
            <tr>
              <td><p>
                <span class="schedule">第二班</span>
                <span class="duty-time">22时-24时</span>
              </p></td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
            </tr>
            <tr>
              <td><p>
                <span class="schedule">第三班</span>
                <span class="duty-time">0时-2时</span>
              </p></td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
            </tr>
            <tr>
              <td><p>
                <span class="schedule">第四班</span>
                <span class="duty-time">2时-4时</span>
              </p></td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
            </tr>
            <tr>
              <td><p>
                <span class="schedule">第五班</span>
                <span class="duty-time">4时-6时</span>
              </p></td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="orange">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
              <td class="cyan">
                <p class="js-onduty"></p>
                <div class="dropbox js-edit">
                  <i class="icon-triangle"></i>
                  <input type="text" value="" name="" class="js-select">
                  <ul class="drop-inner">
                  </ul>
                </div>
              </td>
            </tr>
            <tr>
              <th rowspan="2" class="font-16"><p>在<br>外</p></th>
              <td>
                <p>应急班</p>
              </td>
              <td colspan="9" class="js-yingjiban">
                <p class="js-onduty"></p>
                <div class="txt-area hide-elm js-textarea">
                  <ul class="select-area">
                    <li></li>
                  </ul>
                  <div class="show-select"></div>
                  <a href="javascript:;" class="btn-select">选择</a>
                </div>
              </td>
            </tr>
            <tr>
              <td>
                <p>集训</p>
              </td>
              <td colspan="9" class="js-jixun">
                <p class="js-onduty"></p>
                <div class="txt-area hide-elm js-textarea">
                  <ul class="select-area">
                    <li></li>
                  </ul>
                  <div class="show-select"></div>
                  <a href="javascript:;" class="btn-select">选择</a>
                </div>
              </td>
            </tr>
            <tr>
              <td colspan="2">
                <p>机动</p>
              </td>
              <td colspan="9" class="js-jidong">
                <p class="js-onduty"></p>
                <div class="txt-area hide-elm js-textarea">
                  <ul class="select-area">
                    <li></li>
                  </ul>
                  <div class="show-select"></div>
                  <a href="javascript:;" class="btn-select">选择</a>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        </form>
      </dd>
    </dl>

    <!--页脚-->
    <div class="footer">
      技术支持：北京国势通科技有限公司
    </div>
    <script src="../../asset/js/jquery.min.js"></script>
    <script src="../../asset/js/config.js"></script>
    <script src="../../asset/js/utils.js"></script>
    <script src="../../asset/introduce/layui/layui.js"></script>

    <script>
      layui.use(['laydate','table','form'], function(){
        var laydate = layui.laydate;
        var form = layui.form;
        var d = formatDate();
        laydate.render({
          elem: '.js-laydate',
          value: d,
          format: 'yyyy-MM-dd'
        })

        var layer = layui.layer;
        querySchedule(d, form);

        $('.js-query').on('click',function () {
          var val = $('#dutyTime').val();
          if(val.trim() === ''){
            layer.alert('请选择查询日期！')
            return false;
          }
          querySchedule(val);
        })

        $('.js-btnEdit').off().on('click',function() {
          if ($('.js-btnEdit').text() == "保存") {
            //开始保存
            toSave();
          } else {
            $('.js-btnEdit').text('保存')
            $('.js-onduty').hide();
            $('.js-edit').show();
            $('.js-textarea').removeClass('hide-elm');
            $('.js-isEdit').removeClass('isedit');
          }
        })

        // 隐藏选择列表
        $(document).click(function () {
          $('.select-area').hide();
        })
        $('.select-area').click(function (e) {
          e.stopPropagation();
        })

        $('.js-select').off().on('focus', function () {
          var $tis = $(this);
          $tis.val();
          $('.drop-inner').hide();
          if($tis.next('.drop-inner').find('li').length===0){
            renderSelectlist($tis);
          }else{
            $tis.next('.drop-inner').show();
          }
        }).on('blur', function(){
          setTimeout(function(){
            $(this).next('.drop-inner').hide();
          },100)
        }).on('keyup',function(){
          var $tis = $(this);
          setTimeout(function(){
            var val = $tis.val().trim();
            renderSelectlist($tis, val);
          },1000)
        })

        $('.drop-inner').off().on('click', 'li', function(){
          var $tis = $(this);
          var $input = $tis.parent('.drop-inner').prev('input');
          $input.val($tis.text()).attr('data-pid', $tis.attr('data-pid'));
          if($input.attr('name') !== $input.attr('data-pid')){
            $tis.parents('.dropbox').addClass('edited');
          }
          $tis.parent('.drop-inner').hide();
        })

		var tower;
		var mirror;


		function copy(before, after) {
			var date = $('#dutyTime').val() || formatDate()
			var watchScheduleList = [];

			var rowid = after.attr("rowid");
			var tds = after.find('td');

			var resources = before.find('td');

			for(var j = 1; j <= 9; j++) {
				var columnid = tower[j - 1].id;
				var cellid = $(tds[j]).attr("cellid");

				var pid = $(resources[j]).find("p").attr('pid');

				var json = {
					personnelId: pid,
					type: "2",
					watchHourId: rowid,
					watchTime: date,
					watchTowerId: columnid,
				}

				if(cellid)
					json.id = cellid;

				watchScheduleList.push(json)
			}

			$.ajax({
				url: $ctx + '/watch_schedule/saveOrUpdate',
				data: JSON.stringify( watchScheduleList ),
				contentType: 'application/json',
				type: 'put'
			}).done(function(res) {
				$('.js-edit').text('修改成功')
				querySchedule(date);
			});
		}

    function querySchedule(d){
      var t = new Date().getTime();
      $.ajax({
        url: $ctx + '/watch_schedule/getListByWatchTime/'+ d + '?' + t,
        type: 'get'
      }).done(function(res) {
        var dt = res.data.list;
        console.log(dt)

        //根据后台返回值，确定下拉框的值
        var scheduleType = parseInt(res.data.scheduleType) || 2;
        $('#scheduleType').find('option').eq(scheduleType).attr('selected',true);
        form.render('select');

        for(var i = 0; i < dt.length; i++){
          var $tr = $('#dutyList>tbody>tr').eq(i);
          $tr.addClass('js-isEdit isedit');
          var _dt = dt[i];
          var innerDt = _dt.personnelList;
          var watchTowerIds = ['4895edee792011e9a09e1065300f05d3','4cbef35d792011e9a09e1065300f05d3','52a81997792011e9a09e1065300f05d3','571d66ee792011e9a09e1065300f05d3','daeb0015762611e98a431866daf287a8','e32473e3762611e98a431866daf287a8','eaf95aa7762611e98a431866daf287a8','45a35c3f791c11e9a09e1065300f05d3','4e71c872791c11e9a09e1065300f05d3'];

          for(var j = 0; j < 9; j++) {
            var $td = $tr.find('td').eq(j+1);
            $td.find('.js-edit input').attr('data-watchhourid',_dt.id).attr('data-watchtowerid', watchTowerIds[j]);
            if(innerDt.length > 0){
              for(var k=0; k<innerDt.length; k++){
                if(innerDt[k].watchTowerId === watchTowerIds[j]){
                  $td.find('.js-edit input').val(innerDt[k].personnelName + '(' + innerDt[k].militaryRankName + ')')
                    .attr('name', innerDt[k].personnelId).attr('data-pid', innerDt[k].personnelId)
                    .attr('data-id',innerDt[k].id);
                  $td.find('.js-onduty').html(innerDt[k].personnelName + '<br><span class="ranks">(' + innerDt[k].militaryRankName + ')</span>');
                  break;
                }
              }
            }
          }
        }

      }).fail(function(err) {
        console.error('请求失败！',err.statusText);
      })

      $.ajax({
        url: $ctx + '/watch_schedule/getOutPersonnelByDate/'+ d + '?' + t,
        type: 'get'
      }).done(function(res) {
        var dt = res.data;
        var ids = [];
        for(var i=0; i<dt.length; i++){
          var _html = '';
          var $td = $('#dutyList>tbody>tr').eq(i+12).find('td').eq(1);
          var _dt = dt[i];
          var innerDt = _dt.list;
          if(innerDt.length > 0){
            var innerHtml = '';
            var innerTxt = '';
            if(i===3){
              innerTxt = innerDt.map(function(item){
                return item.personnelName;
              }).join('<br>');
            }else{
              innerTxt = innerDt.map(function(item){
                return item.personnelName;
              }).join('，');
            }
            $td.find('.js-onduty').html(innerTxt);

            var _style = (i===3) ? 'text-area' : 'txt-area';

            for(var j = 0; j<innerDt.length; j++) {
              ids.push(innerDt[j].personnelId);
              innerHtml += '<span data-id="' + innerDt[j].personnelId + '">' + innerDt[j].personnelName + '<a href="javascript:;" class="btn-del">&times;</a></span>';
            }
          }
          $td.find('.show-select').html(innerHtml);
        }

        $('.btn-select').on('click',function(e){
          e.stopPropagation();
          var $tis = $(this);
          if($tis.parent('.js-textarea').find('.select-area li').find('label').length>0){
            $tis.parent('.js-textarea').find('.select-area').show();
          }else{
            renderSelectarea($tis,ids);
          }
        })
      }).fail(function(err) {
        console.error('请求失败！',err.statusText);
      })
    }

		function renderSelectarea(tis, ids){
      $.ajax({
        url: $ctx + '/sys_armed_police/findPersonnelByNameAndRank',
        type: 'get'
      }).done(function(res) {
        var dt = res.data;
        var chkHtml = '';
        for(var i=0; i<dt.length; i++){
          var item = dt[i];
          var isCheck = false;
          var _title = item.personnelName + '(' + item.militaryRankName + ')';
          for(var j=0; j<ids.length; j++){
            if(ids[j]===item.id){
              isCheck = true;
              break;
            }
          }
          if(isCheck){
            chkHtml += '<label class="chkbox"><input type="checkbox" name="soldier" data-name="' + item.personnelName + '" value="' + item.id + '" checked="">' + _title + '<i></i></label>'
          }else{
            chkHtml += '<label class="chkbox"><input type="checkbox" name="soldier" data-name="' + item.personnelName + '" value="' + item.id + '">' + _title + '<i></i></label>'
          }
        }
        tis.parent('.js-textarea').find('.select-area').show().find('li').html(chkHtml);

        $("input[name='soldier']").click(function(){
          var $tis = $(this);
          var val = $tis.val();
          if($tis.prop('checked')){
            var str = '<span data-id="' + val + '">' + $tis.attr('data-name') + '<a href="javascript:;" class="btn-del">&times;</a></span>';
            $tis.parents('.js-textarea').find('.show-select').append(str);
          }else{
            $tis.parents('.js-textarea').find('.show-select span').each(function(){
              var $that = $(this);
              if(val === $that.attr('data-id')){
                $that.remove();
              }
            })
          }

          $('.btn-del').off().on('click',function(){
            var $tis = $(this);
            var val = $tis.parent('span').attr('data-id');
            $tis.parents('.js-textarea').find('input[name="soldier"]').each(function(){
              var $that = $(this);
              if(val === $that.val()){
                $that.prop('checked',false);
                $tis.parent('span').remove();
              }
            })
          })
        });

      }).fail(function(err) {
        console.error('请求失败！',err.statusText);
      })
    }

    function renderSelectlist(tis, val){
		  var _url = val ? ('/sys_armed_police/findPersonnelByNameAndRank?name=' + val) : '/sys_armed_police/findPersonnelByNameAndRank';
		  $.ajax({
        url: $ctx + _url,
        type: 'get'
      }).done(function(res) {
        var dt = res.data;
        if(dt.length>0){
          var liHtml = '';
          for(var i=0; i<dt.length; i++){
            var item = dt[i];
            liHtml += '<li data-pid="' + item.id + '">'
              + item.personnelName + '(' + item.militaryRankName + ')' + '</li>';
          }
          tis.next('.drop-inner').show().html(liHtml);
        }
      }).fail(function(err) {
        console.error('请求失败！',err.statusText);
      })
    }

    function toSave(){
		  var watchTime = $('#dutyTime').val();
		  var scheduleType = $('#scheduleType').val();
		  var watchScheduleData = [];

		  // WpWatchScheduleVoForSave：watchScheduleList
      $('.edited').find('input').each(function(){
        // var $input = $(this).find('input');
        var obj = {
          id: '',
          personnelId: '',
          type: scheduleType,
          watchTime: watchTime,
          personnelId: '',
          watchHourId: '',
          watchTowerId: ''
        };
        var pid = $(this).attr('data-pid'),
            watchHourId =  $(this).attr('data-watchhourid'),
            watchTowerId = $(this).attr('data-watchtowerid');
        if($(this).find('input').attr('name')){
          // 修改
          obj.id = $(this).attr('data-pid');
          obj.personnelId = $(this).attr('data-pid');
        }else{
          // 新增
          obj.type = scheduleType;
          obj.watchTime = watchTime;
          obj.personnelId = pid;
          obj.watchHourId = watchHourId;
          obj.watchTowerId = watchTowerId;
        }
        watchScheduleData.push(obj);
      })

		  // WpWatchScheduleVoForSave：其他
      var jddata = [];
      $('.js-jidong').find('.show-select span').each(function(){
        jddata.push($(this).attr('data-id'));
      })
      var jxdata = [];
      $('.js-jixun').find('.show-select span').each(function(){
        jxdata.push($(this).attr('data-id'));
      })
      var yjbdata = [];
      $('.js-yingjiban').find('.show-select span').each(function(){
        yjbdata.push($(this).attr('data-id'));
      })
      var yjzdata = [];
      $('.js-urgent').find('.show-select span').each(function(){
        yjzdata.push($(this).attr('data-id'));
      })
      var params = {
        jdPersonnelIdList: jddata,
        jxPersonnelIdList: jxdata,
        yjbPersonnelIdList: yjbdata,
        yjzPersonnelIdList: yjzdata,
        watchScheduleList: watchScheduleData,
        watchTime: watchTime
      }

      $.ajax({
        url: $ctx + '/watch_schedule/saveOrUpdate',
        data: JSON.stringify( params ),
        contentType: 'application/json',
        type: 'put'
      }).done(function(res) {
        layer.msg('修改成功')
        $('.js-btnEdit').text('修改')
        $('.js-onduty').show();
        $('.js-edit').hide();
        $('.js-textarea').addClass('hide-elm');
        $('.js-isEdit').addClass('isedit');
        querySchedule(watchTime);
      }).fail(function(err) {
        layer.msg('修改失败！');
      });
    }
  })
    </script>
</body>

</html>