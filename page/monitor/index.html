<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../../asset/js/My97DatePicker/WdatePicker.js"></script>
    <script src="../../asset/js/json2.js"></script>

    <script language="javascript" for="DPSDK_OCX"
            event="OnCorrectTalkParamEvent(nTalkType, nAudioType, nAudioBit, nSampleRate, nTransMode)">
        var str = ("Correct Talk Param [nTalkType=" + nTalkType + "]" + " [nAudioType=" + nAudioType + "]" +
            " [nAudioBit=" + nAudioBit +
            "]" + " [nSampleRate=" + nSampleRate + "]");
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX"
            event="OnMediaDataFirstFrameEvent(szCameraID, nCameraIDLen, nFactoryType, nPlayMode)">
        var str = (" Media Data First Frame [szCameraID=" + szCameraID + "]" + " [nCameraIDLen=" + nCameraIDLen + "]" +
            " [nFactoryType=" + nFactoryType + "]" +
            " [nPlayMode=" + nPlayMode + "]");
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX"
            event="OnCorrectTalkParamEvent(nTalkType, nAudioType, nAudioBit, nSampleRate, nTransMode)">
        var str = ("Correct Talk Param [nTalkType=]" + nTalkType + " [nAudioType=]" + nAudioType + " [nAudioBit=]" +
            nAudioBit +
            " [nSampleRate=]" + nSampleRate + " [nTransMode=]" + nTransMode);
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnDownloadRecordProgress(szFileName,fProgress)">
        document.getElementById("textDownloadProgress").innerText = fProgress;
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnDownloadRecordComplete(szFileName)">
        document.getElementById("textDownloadProgress").innerText = 100;
        alert("下载完成!");
    </script>

    <script language="javascript" for="DPSDK_OCX"
            event="OnAlarmEvent(szAlarmId, szCameraId, szDeviceName, szChannelName, nAlarmType, nEventType, nLevel, nTime)">
        var str = ("OnAlarmEvent [szAlarmId=]" + szAlarmId + " [szCameraId=]" + szCameraId + "[szDeviceName=]" +
            szDeviceName +
            "[szChannelName=]" + szChannelName + "[nAlarmType=]" + nAlarmType + "[nEventType=]" + nEventType +
            "[nLevel=]" + nLevel + "[nTime=]" + nTime);
        document.getElementById("GlobalInfo").innerText = str;

        if (8 == nAlarmType) {
            //alert(szChannelName);
        } else if ((300 < nAlarmType) && (nAlarmType < 1100)) {
            //alert(szChannelName);
        } else {
            //alert(szCameraId);
        }
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnDevStatusEvent(szDevId, nStatus)">
        var str = "";
        switch (nStatus) {
            case 1:
                //alert("设备上线！" + szDevId);
                str = "设备上线！" + szDevId;
                break;
            case 2:
                //alert("设备离线！" + szDevId);
                str = "设备离线！" + szDevId;
                break;
        }
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnNvrChannelStatusEvent(szChnlId, nStatus)">
        var str = "";
        switch (nStatus) {
            case 1:
                str = "通道上线！" + szChnlId;
                break;
            case 2:
                str = "通道离线！" + szChnlId;
                break;
        }
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnGeneralJsonCallBack(Json)">
        var str1 = "json返回结果：";
        var str = str1 + Json;
        document.getElementById("JsonResult").innerText = str;

        var jsonObj = JSON.parse(Json);
        var strMethod = jsonObj.method;

        if (strMethod == "cu.searchSnapPicUrl") {
            var obj = document.getElementById("DPSDK_OCX");
            var ftpInfo = obj.DPSDK_GetFTPInfo();
            var picurl = jsonObj.params.snapPicList[0].snapPicUrl;
            var ftpurl = ftpInfo + picurl;
            alert(ftpurl);
            document.getElementById("snapPicture").src = ftpurl;
        } else if (strMethod == "dms.getSnapPic") {
            var picdata = jsonObj.params.PicData;
            alert(picdata);
        } else if (strMethod == "Scs.NotifyBye") {
            alert("通话结束");
        } else if (strMethod == "client.getSystemState" || strMethod == "client.getServiceState") {
            alert(Json);
        }
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnServerStatusChangeEvent(nStatus)">
        var str = "";
        switch (nStatus) {
            case 1:
                str = "服务上线！";
                var obj = document.getElementById("DPSDK_OCX");
                ShowCallRetInfo(obj.DPSDK_LoadDGroupInfo(), "加载组织结构");
                break;
            case 2:
                str = "服务离线！";
                break;
        }
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnAsyncLoadDGroupInfoComplete(nRet, nGroupLen)">
        var str = ("AsyncLoadDGroupInfoComplete [nRet=]" + nRet + " [nGroupLen=]" + nGroupLen);
        document.getElementById("RetInfo").innerText = str;
        var obj = document.getElementById("DPSDK_OCX");
        //	document.getElementById("DGroupInfo").innerText = obj.DPSDK_GetDGroupStr();
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnWndLBtnClick(nWndId, nWndNo, xPos, yPos)">
        var str = ("OnWndLBtnClick [nWndId=]" + nWndId + " [nWndNo=]" + nWndNo + " [xPos=]" + xPos + " [yPos=]" + yPos);
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnWndRBtnClick(nWndId, nWndNo, xPos, yPos)">
        var str = ("OnWndRBtnClick [nWndId=]" + nWndId + " [nWndNo=]" + nWndNo + " [xPos=]" + xPos + " [yPos=]" + yPos);
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnDoorStatusReportEvent(szCameraId, status, time)">
        var doorstatus = "";
        switch (status) {
            case 1:
                doorstatus = "开门！";
                break;
            case 0:
                doorstatus = "关门！";
                break;
            case 2:
                doorstatus = "离线！";
                break;
        }
        var str = ("DoorStatusReport [szCameraId=]" + szCameraId + " [status=]" + doorstatus + " [time=]" + time);
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX"
            event="OnNetAlarmHostStatusReportEvent(szDeviceId, nReportType, nOperationType, nStatus)">
        var strReportType = "";
        var strOperationType = "";
        var strStatus = "";
        switch (nReportType) {
            case 1:
                strReportType = "留守布防";
                break;
            case 2:
                strReportType = "防区旁路";
                break;
            default:
                strReportType = "未知";
                break;
        }
        switch (nOperationType) {
            case 1:
                strOperationType = "设备 布/撤防";
                break;
            case 2:
                strOperationType = "通道 布/撤防";
                break;
            case 3:
                strOperationType = "报警输出通道操作";
                break;
            default:
                strOperationType = "未知";
                break;
        }
        switch (nStatus) {
            case 1:
                strStatus = "布防/旁路";
                break;
            case 2:
                strStatus = "撤防/取消旁路";
                break;
            default:
                strStatus = "未知";
                break;
        }
        var str = ("网络报警主机状态上报 [szCameraId=]" + szDeviceId + " [ReportType=]" + strReportType + " [OperationType=]" +
            strOperationType + " [Status=]" + strStatus);
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX"
            event="OnVideoAlarmHostStatusReportEvent(szDeviceId, nChannelNO, nStatus)">
        var strStatus = "";
        switch (nStatus) {
            case 1:
                strStatus = "针对设备布防";
                break;
            case 3:
                strStatus = "针对设备撤防";
                break;
            case 4:
                strStatus = "针对通道旁路";
                break;
            case 5:
                strStatus = "针对通道取消旁路";
                break;
            case 6:
                strStatus = "针对设备在家布防";
                break;
            case 7:
                strStatus = "针对设备外出布防";
                break;
            default:
                strStatus = "未知";
                break;
        }
        var str = ("视频报警主机状态上报 [szCameraId=]" + szDeviceId + " [ChannelNO=]" + nChannelNO + " [Status=]" + strStatus);
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnBayCarInfoEvent(szBayCarInfo)">
        document.getElementById("GlobalInfo").innerText = szBayCarInfo;
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnPlaybackCompleteByWndNo(nWndId, nWndNo)">
        var obj = document.getElementById("DPSDK_OCX");
        obj.DPSDK_StartFilePlaybackByWndNo(nWndId, nWndNo, 1);
    </script>

    <script language="javascript" for="DPSDK_OCX"
            event="OnChannelViewInfoReportEvent(szCamearId, nDistance, nAngelH, nAzimuthH, nInclinationH)">
        var str = ("OnChannelViewInfoReportEvent [szCamearId=]" + szCamearId + " [nDistance=]" + nDistance +
            "[nAngelH=]" + nAngelH +
            "[nAzimuthH=]" + nAzimuthH + "[nInclinationH=]" + nInclinationH);
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnAsyncLoginComplete(nRet)">
        if (nRet == 0) {
            bLogin = 1;
        }
        ShowCallRetInfo(nRet, "异步登录");
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnAsyncStartRealplayComplete(nRet, nWndId, nWndNo)">
        var str;
        if (nRet == 0) {
            str = "异步播放视频成功，nWndId = " + nWndId + "，nWndNo = " + nWndNo;
            var szCameraId = document.getElementById("textCameraID").value;
            var obj = document.getElementById("DPSDK_OCX");
            var nWndNo = obj.DPSDK_GetSelWnd(gWndId);
            insertRealplayHistory(szCameraId);
            ShowCallRetInfo(obj.DPSDK_SetIvsShowFlagByWndNo(gWndId, nWndNo, 1, bIVS), "规则线显示"); //打开规则线显示
            ShowCallRetInfo(obj.DPSDK_SetIvsShowFlagByWndNo(gWndId, nWndNo, 2, bIVS), "目标框显示"); //打开目标框显示
            ShowCallRetInfo(obj.DPSDK_SetIvsShowFlagByWndNo(gWndId, nWndNo, 3, bIVS), "轨迹线显示"); //打开轨迹线显示
        } else {
            str = "异步播放视频失败，错误码：" + nRet;
        }
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnAsyncStopRealplayComplete(nRet, nWndId, nWndNo)">
        var str;
        if (nRet == 0) {
            str = "异步停止视频成功，nWndId = " + nWndId + "，nWndNo = " + nWndNo;
        } else {
            str = "异步停止视频失败，错误码：" + nRet;
        }
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnAsyncPtzDirectionComplete(nRet, szCameraId)">
        var str;
        if (nRet == 0) {
            str = "异步云台方向控制成功，szCameraId = " + szCameraId;
        } else {
            str = "异步云台方向控制失败，错误码：" + nRet;
        }
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnVtCallInviteCallback(szUserId)">
        var str = szUserId + "请求可视对讲";
        alert(str);
    </script>

    <script language="javascript" for="DPSDK_OCX" event="OnBusyVtCallCallback()">
        var str = "呼叫繁忙";
        document.getElementById("GlobalInfo").innerText = str;
    </script>

    <title>武警智慧磐石执勤安保信息管理平台</title>
    <!-- <title>综合管理</title> -->
    <link rel="stylesheet" href="../../asset/introduce/layui/css/layui.css">
    <link rel="stylesheet" href="../../asset/introduce/zTree/css/zTreeStyle/zTreeStyle.css">
    <link rel="stylesheet" href="../../asset/css/common.css">
    <link rel="stylesheet" href="../../asset/css/reset.css">
    <link rel="stylesheet" href="./index.css">
    <link rel="stylesheet" type="text/css" href="../../asset/css/DSSPlay.css"/>
    <link rel="stylesheet" href="../angel/index.css">
    <link rel="stylesheet" href="../prevention/index.css">
</head>

<body>
<!--头部-->
<div class="header">
    <a class="header-lt" id="header" href="../index/index.html"></a>
    <div class="header-rt">
        <ul>
            <li class="notice-wrapper">
                <img class="notice-icon" src="../../asset/img/notice.png" alt="通知">
            </li>
            <li class="user-notice">
                <div id="user-operate" class="user-operate">
                    <a href="javascript:;">
                        <img class="user-img" src="../../asset/img/logo.png" alt="头像">
                        管理
                    </a>
                    <a href="javascript:;" class="exit" title="退出">退出</a>
                </div>
            </li>
        </ul>
    </div>
</div>
<!--侧边栏-->
<iframe id="zhanwei-c" src="about:blank" frameborder="0" marginheight="0"
        marginwidth="0"
        style="position: fixed;display: block;top: 75px;left: -480px;width: 480px;height: 2000px;z-index: 90;background: transparent;"></iframe>
<div class="aside">
    <div class="aside-bg">
        <i class="aside-bg-lt"></i>
        <i class="aside-bg-mt"></i>
        <i class="aside-bg-mt-img"></i>
        <i class="aside-bg-rt"></i>
        <i class="aside-bg-lm"></i>
        <i class="aside-bg-mm"></i>
        <i class="aside-bg-rm"></i>
        <i class="aside-bg-lb"></i>
        <i class="aside-bg-mb"></i>
        <i class="aside-bg-rb"></i>
    </div>
    <div class="menu-tree">
        <ul id="menu-tree" class="ztree"></ul>
    </div>
    <!--<a href="javascript:;" id="showFlag" class="icon-fold unfolded"></a>-->
</div>
<a href="javascript:;" class="icon-fold"><img id="showFlag" src="../../asset/img/icon_fold.png" alt="1"></a>
<!--主体-->
<div class="main">
    <div class="tabview">
        <ul class="tabtop js-tabtop">
            <li class="js-tabhd">
                <a href="javascript:void(0)">三维立体全景监控</a>
            </li>
            <li class="js-tabhd on" id="devidMode">
                <a href="javascript:void(0)">分屏模式</a>
            </li>
            <li class="js-tabhd">
                <a href="javascript:void(0)">联防联动</a>
            </li>
        </ul>
        <!-- tab-hd =end= -->

        <!-- tab-bd =start= -->
        <ul class="tabmain js-tabmain">
            <li class="js-tabbd">
                <!-- tab-bd>>>li =start= -->
                <div class="angel-wrapper">
                    <div class="angel-bg">
                        <span class="big-lt"></span>
                        <span class="big-ct"></span>
                        <span class="big-rt"></span>
                        <span class="big-rc"></span>
                        <span class="big-rb"></span>
                        <span class="big-bc"></span>
                        <span class="big-lb"></span>
                        <span class="big-lc"></span>
                    </div>
                    <div class="angel-video-wrapper">
                        <object id="MediaPlayer" classid="clsid:22D6F312-B0F6-11D0-94AB-0080C74C7E95" width="800"
                                height="600" type="application/x-oleobject">
                            <param name="FileName" value="../../asset/8888.avi">
                        </object>
                    </div>
                </div>
                <!-- tab-bd>>>li =end= -->
            </li>
            <li class="js-tabbd on">
                <!-- tab-bd>>>li =start= -->
                <div class="split-mode">
                    <ul id="mode-rec" class="mode-content mode-rec-4">
                        <!-- js添加li -->
                        <span class="clearfix"></span>
                    </ul>

                    <div class="slider-operate">
                        <img src="../../asset/img/btn_1_1.png" alt="">
                        <div id="slide" class="slider"></div>
                        <img src="../../asset/img/btn_4_4.png" alt="">
                        <img class="js-btn-big" src="../../asset/img/btn_big.png" alt="">
                    </div>
                </div>
                <!-- tab-bd>>>li =end= -->
                <!--历史记录 start-->
                <div class="history-wrapper">
                    <div class="history-top mode-content">
                        <div class="video-wrapper">
                            <div class="video">
                                <div id="mainbg">
                                    <div id="main">
                                        <div style="width: 100%;height: 0;overflow: auto;" id="RetInfo">

                                        </div>
                                        <div style="width: 100%;height: 0px;overflow: auto;" id="GlobalInfo">

                                        </div>
                                        <div class="box_top"></div>
                                        <div id="mviewl">
                                            <div id="obj">
                                                <object id="DPSDK_OCX"
                                                        classid="CLSID:D3E383B6-765D-448D-9476-DFD8B499926D"
                                                        style="width: 100%; height: 100%"
                                                        codebase="DpsdkOcx.cab#version=1.0.0.0"></object>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <iframe id="zhanwei" src="about:blank" frameborder="0" marginheight="0"
                                        marginwidth="0"
                                        style="position: absolute;display: none;top: 32px;right: 160px;width: 80px;height: 168px;z-index: 0;background: #000;"></iframe>
                                <div class="v-toolbar" style="position: absolute;left: 0;right: 0;top: 0;">
                                    <a href="javascript:;" class="icon-speed"><img
                                            src="../../asset/img/icon_speed.png"> 倍速</a>
                                    <a href="javascript:;" class="playAndsuspend"><img
                                            src="../../asset/img/icon_pause.png"> <span
                                            id="playAndsuspend">停止播放</span></a>
                                    <a href="javascript:;" class="icon-history"><img
                                            src="../../asset/img/icon-close.png"> 关闭</a>
                                    <div class="speed-wrapper">
                                        <a href="javascript:;"
                                           onclick="return ButtonSetPlaybackSpeedByWndNo_onclick(64)"
                                           class="speed-item">8.0X</a>
                                        <a href="javascript:;"
                                           onclick="return ButtonSetPlaybackSpeedByWndNo_onclick(32)"
                                           class="speed-item">4.0X</a>
                                        <a href="javascript:;"
                                           onclick="return ButtonSetPlaybackSpeedByWndNo_onclick(16)"
                                           class="speed-item">2.0X</a>
                                        <a href="javascript:;"
                                           onclick="return ButtonSetPlaybackSpeedByWndNo_onclick(8)"
                                           class="speed-item">1.0X</a>
                                        <a href="javascript:;"
                                           onclick="return ButtonSetPlaybackSpeedByWndNo_onclick(4)"
                                           class="speed-item">1/2X</a>
                                        <a href="javascript:;"
                                           onclick="return ButtonSetPlaybackSpeedByWndNo_onclick(2)"
                                           class="speed-item">1/4X</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="date-wrapper">
                            <div class="calendar" id="calendar"></div>
                            <div class="search-btn">搜索录像</div>
                        </div>
                    </div>
                    <div class="scale-wrapper">
                        <div class="scale-title">历史视频时间段控制</div>
                        <div class="scale">
                            <div class="scale-num"><img src="../../asset/img/scalenum.png"></div>
                            <img src="../../asset/img/graduation.png" class="scale-bar"/>
                            <div class="scale-box">
                                <span data-count="0" class="scale-unit spec"></span>
                                <span data-count="1" class="scale-unit"></span>
                                <span data-count="2" class="scale-unit"></span>
                                <span data-count="3" class="scale-unit"></span>
                                <span data-count="4" class="scale-unit"></span>
                                <span data-count="5" class="scale-unit"></span>
                                <span data-count="6" class="scale-unit"></span>
                                <span data-count="7" class="scale-unit"></span>
                                <span data-count="8" class="scale-unit"></span>
                                <span data-count="9" class="scale-unit"></span>
                                <span data-count="10" class="scale-unit"></span>
                                <span data-count="11" class="scale-unit"></span>
                                <span data-count="12" class="scale-unit"></span>
                                <span data-count="13" class="scale-unit"></span>
                                <span data-count="14" class="scale-unit"></span>
                                <span data-count="15" class="scale-unit"></span>
                                <span data-count="16" class="scale-unit"></span>
                                <span data-count="17" class="scale-unit"></span>
                                <span data-count="18" class="scale-unit"></span>
                                <span data-count="19" class="scale-unit"></span>
                                <span data-count="20" class="scale-unit"></span>
                                <span data-count="21" class="scale-unit"></span>
                                <span data-count="22" class="scale-unit"></span>
                                <span data-count="23" class="scale-unit"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <!--历史记录 end-->
            </li>
            <li class="js-tabbd">
                <div class="prevention">
                    <dt>
                        <div class="sign">
                            <span class="icon-police-red"><img src="../../asset/img/sign-red.png">震动光纤报警</span>
                            <span class="icon-police-yellow"><img src="../../asset/img/sign-yellow.png">激光对射报警</span>
                            <span class="icon-police-green"><img src="../../asset/img/sign-green.png">周界入侵报警</span>
                            <span class="btn-police">
                            <a href="javascript:;" class="js-police-btn-yes layui-btn layui-btn-sm layui-btn-normal">确定</a>
                            <a href="javascript:;" class="js-police-btn-no layui-btn layui-btn-sm layui-btn-primary">取消</a>
                        </span>
                        </div>
                    </dt>
                    <dd>
                        <div class="prevention-left">
                            <div class="prevention-map">
                                <div class="prevention-img">
                                    <img src="../../asset/img/prevention-bj.png">
                                    <span class="r-warn r-warn1" data-pos="震动光纤_1" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn1" data-pos="周界1号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn1" data-pos="激光对射1防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn2" data-pos="震动光纤_2" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn2" data-pos="周界2号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn2" data-pos="激光对射2防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn3" data-pos="震动光纤_3" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn3" data-pos="周界3号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn3" data-pos="激光对射3防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn4" data-pos="震动光纤_4" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn4" data-pos="周界4号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn4" data-pos="激光对射4防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn5" data-pos="震动光纤_5" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn5" data-pos="周界5号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn5" data-pos="激光对射5防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn6" data-pos="震动光纤_6" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn6" data-pos="周界6号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn6" data-pos="激光对射6防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn7" data-pos="震动光纤_7" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn7" data-pos="周界7号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn7" data-pos="激光对射7防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn8" data-pos="震动光纤_8" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn8" data-pos="周界8号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn8" data-pos="激光对射8防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn9" data-pos="震动光纤_9" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn9" data-pos="周界9号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn9" data-pos="激光对射9防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn10" data-pos="震动光纤_10" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn10" data-pos="周界10号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn10" data-pos="激光对射10防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn11" data-pos="震动光纤_11" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn11" data-pos="周界11号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn11" data-pos="激光对射11防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn12" data-pos="震动光纤_12" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn12" data-pos="周界12号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn12" data-pos="激光对射12防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn13" data-pos="震动光纤_13" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn13" data-pos="周界13号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn13" data-pos="激光对射13防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn14" data-pos="震动光纤_14" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn14" data-pos="周界14号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn14" data-pos="激光对射14防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn15" data-pos="震动光纤_15" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn15" data-pos="周界15号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn15" data-pos="激光对射15防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn16" data-pos="震动光纤_16" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn16" data-pos="周界16号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn16" data-pos="激光对射16防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn17" data-pos="震动光纤_17" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn17" data-pos="周界17号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn17" data-pos="激光对射17防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn18" data-pos="震动光纤_18" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn18" data-pos="周界18号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn18" data-pos="激光对射18防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn19" data-pos="震动光纤_19" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn19" data-pos="周界19号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn19" data-pos="激光对射19防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn20" data-pos="震动光纤_20" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn20" data-pos="周界20号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn20" data-pos="激光对射20防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn21" data-pos="震动光纤_21" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn21" data-pos="周界21号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn21" data-pos="激光对射21防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn22" data-pos="震动光纤_22" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn22" data-pos="周界22号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn22" data-pos="激光对射22防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn23" data-pos="震动光纤_23" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn23" data-pos="周界23号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn23" data-pos="激光对射23防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn24" data-pos="震动光纤_24" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn24" data-pos="周界24号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn24" data-pos="激光对射24防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn25" data-pos="震动光纤_25" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn25" data-pos="周界25号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn25" data-pos="激光对射25防区" data-type="激光对射"></span>

                                    <span class="r-warn r-warn26" data-pos="震动光纤_26" data-type="光纤震动"></span>
                                    <span class="g-warn g-warn26" data-pos="周界26号" data-type="周界入侵"></span>
                                    <span class="y-warn y-warn26" data-pos="激光对射26防区" data-type="激光对射"></span>
                                </div>
                                <span class="icon-corner corner-top-left"></span>
                                <span class="icon-corner corner-top-right"></span>
                                <span class="icon-corner corner-bottom-left"></span>
                                <span class="icon-corner corner-bottom-right"></span>
                            </div>
                        </div>
                        <div class="prevention-right" id="video-wrapper">
                        </div>
                    </dd>
                </div>

            </li>
        </ul>
    </div>
</div>

<div class="footer">
    技术支持：北京国势通科技有限公司
</div>
<!--报警弹框-->

<script src="../../asset/js/jquery.min.js"></script>
<script src="../../asset/js/config.js"></script>
<script type='text/javascript' src='/dwr/engine.js'></script>
<script type='text/javascript' src='/dwr/interface/DwrImpl.js'></script>
<script type='text/javascript' src='/dwr/util.js'></script>
<!--<script src="../../asset/js/utils.js"></script>-->
<script src="../../asset/introduce/layui/layui.js"></script>
<script src="../../asset/introduce/zTree/js/jquery.ztree.all.min.js"></script>
<script src="../../asset/js/ocxfun.js"></script>
<script src="../../asset/js/aside.js"></script>
<script src="./index.js"></script>
<script src="./prevention.js"></script>
<script>
    $(function(){
        /*--------------------
       * Tab切换
       *-------------------*/
        $('.js-tabtop > li').click(function(){
            var liindex = $('.js-tabtop > li').index(this);
            $(this).addClass('on').siblings().removeClass('on');
            $('.js-tabmain > li').eq(liindex).addClass('on').siblings().removeClass('on');
        });
    })

    /*--------------------
    ** 报警弹框
    * *-------------------*/
    $('body').on('click', '.js-police-pop-close', function () {
        var msg = $(this).closest('.police-wrapper').find('.js-police-msg').html()
        var that = this;
        // $.ajax({
        //     type:'GET',
        //     dataType:'json',
        //     contentType:'application/json',
        //     url: $ctx +'/alarm/putAlarmCancel?msg=' + encodeURIComponent(msg) + '&op=no',
        //     success:function(res){
        //         if (res.code == 0){
        $(that).closest('.police-wrapper').remove();
        //         }
        //     }
        // })
    }).on('click', '.js-police-look', function () {
        var msg = $(this).closest('.police-wrapper').find('.js-police-msg').html();
        var rtspUrls = $(this).closest('.police-wrapper').find('.js-rtspUrls').text();
        var _encodeRtsp = encodeURIComponent(rtspUrls);
        // console.log(_encodeRtsp, '_encodeRtsp');
        sessionStorage.setItem("hrefParam",msg);
        sessionStorage.setItem("rtspUrls",_encodeRtsp);

        // document.cookie="hrefParam="+ msg + ';path=/'; // 存储cookie
        // document.cookie="rtspUrls="+_encodeRtsp + ';path=/';
        //console.log(document.cookie);
        // window.location.href = '../../prevention/index.html?call=1';
        window.location.href = './index.html?call=1';
    })

    var _top = 80;
    // 报警弹框 后端出发
    //  激活ajax
    dwr.engine.setActiveReverseAjax(true)
    // // 页面未加载的时候是否发送通知
    dwr.engine.setNotifyServerOnPageUnload(true,true)
    // // 出现错误后的处理方法
    dwr.engine.setErrorHandler(function(){})

    function getAlarmTime(dataValue){
        if ($('.js-tabhd').eq(2).hasClass('on')){
            return
        }
        _top += 10;
        var html_pop = '';
        var data = JSON.parse(dataValue.msg);
        html_pop += '<iframe id="zhanwei-police" src="about:blank" frameborder="0" marginheight="0" marginwidth="0" style="position: fixed;display: block;top:  '+ _top +'px;right: 30px;width: 290px;height: 302px;z-index: 0;background: transparent;"></iframe><div class="police-wrapper" style="top: '+ _top +'px;">' +
            '<div class="police-title">报警信息<img class="police-close js-police-pop-close" src="../../asset/img/icon-close.png" alt="关闭"></div>' +
            '<ul class="police-content">' +
            '<li><span>报警类型：</span><span class="police-detail">' + data.alarmType.systemOptionName +'</span></li>' +
            '<li><span>设备名称：</span><span class="police-detail">'+ data.alarmSource.iPDeviceName +'</span></li>' +
            '<li><span>报警时间：</span><span class="police-detail">'+ data.timeCreated +'</span></li></ul>' +
            '<div class="btn-wrapper">' +
            '<div style="display: none" class="js-police-msg">'+dataValue.msg+'</div>' +
            '<div class="js-rtspUrls" style="display: none;">'+dataValue.rtspUrls+'</div>'+
            '<a href="javascript:;" class="js-police-look layui-btn layui-btn-sm layui-btn-normal" target="_self">查看</a>' +
            '<a href="javascript:;" class="js-police-pop-close layui-btn layui-btn-sm layui-btn-primary">关闭</a>' +
            '</div></div>';
        $('body').append(html_pop);
    }

    var paramUrl = window.location.href.split('?')[1]; //弹框进入时的路径参数
    if (paramUrl){
        $('.js-tabhd').eq(2).addClass('on');
        $('.js-tabbd').eq(2).addClass('on');
    }
    // 4、渲染跳转页面的灯笼和视频
    renderPageJump(); // 从报警弹框进入
    renderList(); // 初始化渲染视频列表
    var _this = this;
    var szCameraId = "";

    //计算高度，超出隐藏
    function caleHeight(itemnumb) {
        // 设置分屏模式视频高度
        var itemWidth = $('.mode-content .videos').width();
        var itemHeight = itemWidth * 9 / 16;
        $('.mode-content li').each(function () {
            var $tis = $(this);
            if ($tis.attr('data-active') != undefined) {
                $tis.find('.videos').css('height', itemHeight).attr('data-height', itemHeight);
            } else {
                $tis.find('.videos').css('height', (itemHeight + 32)).attr('data-height', itemHeight);
            }
        })
        $('#vlc1').css({
            "width": itemWidth,
            "height": itemHeight
        })
        $('#vlc2').css({
            "width": itemWidth,
            "height": itemHeight
        })
        $('#vlc3').css({
            "width": itemWidth,
            "height": itemHeight
        })
        $('#vlc4').css({
            "width": itemWidth,
            "height": itemHeight
        })
        $('#mode-rec').css({
            'height': (itemHeight + 32) * itemnumb + (itemnumb + 1) * 10, // 10：item元素边距；32：toolbar高度
            'overflow': 'hidden'
        })
    }

    // 鼠标滑过分屏模式视频&滑过历史记录视频
    $('body').on('mouseenter', '.video-wrapper .video', function () {
        $(this).children('.v-toolbar').show();
        $(this).find('.opt-monitor').stop().hide();
    }).on('mouseleave', '.video-wrapper .video', function () {
        $(this).children('.v-toolbar').stop().hide();
        $('#zhanwei').stop().hide();
        $('.speed-wrapper').stop().hide();
    })
    // 点击云平台控制
    $('body').on('click', '.js-control', function () {
        $(this).parent().children('.opt-monitor').toggle()
    })
    $('.js-tabtop').on('click', '#devidMode', function () {
        _this.caleHeight(4)
    })
    //滑块
    layui.use('slider', function () {
        var slider = layui.slider;
        //设置步长
        var sliderSet = slider.render({
            elem: '#slide',
            step: 1, //步长,
            min: 1,
            max: 4,
            value: 4,
            change: function (value) {
                //do something
                if (value == 4) {
                    $('#mode-rec').removeClass('mode-rec-1')
                    $('#mode-rec').removeClass('mode-rec-2')
                    $('#mode-rec').removeClass('mode-rec-3')
                    $('#mode-rec').addClass('mode-rec-4')
                    _this.caleHeight(4)
                } else if (value == 3) {
                    $('#mode-rec').removeClass('mode-rec-1')
                    $('#mode-rec').removeClass('mode-rec-2')
                    $('#mode-rec').removeClass('mode-rec-4')
                    $('#mode-rec').addClass('mode-rec-3')
                    _this.caleHeight(3)
                } else if (value == 2) {
                    $('#mode-rec').removeClass('mode-rec-1')
                    $('#mode-rec').removeClass('mode-rec-3')
                    $('#mode-rec').removeClass('mode-rec-4')
                    $('#mode-rec').addClass('mode-rec-2')
                    _this.caleHeight(2)
                } else if (value == 1) {
                    $('#mode-rec').removeClass('mode-rec-2')
                    $('#mode-rec').removeClass('mode-rec-3')
                    $('#mode-rec').removeClass('mode-rec-4')
                    $('#mode-rec').addClass('mode-rec-1')
                    _this.caleHeight(1)
                }

            }
        });
        // 分屏模式放大功能
        $('.js-btn-big').on('click', function () {
            $('#mode-rec').removeClass('mode-rec-2')
            $('#mode-rec').removeClass('mode-rec-3')
            $('#mode-rec').removeClass('mode-rec-4')
            $('#mode-rec').addClass('mode-rec-1')
            _this.caleHeight(1)
            sliderSet.setValue(0)
        })
    })

    // 点击云平台控制
    // $('body').on('click', '.js-control', function () {
    //     $(this).parent().children('.opt-monitor').toggle()
    // })

    // 渲染日期组件
    layui.use('laydate', function () {
        var laydate = layui.laydate;
        laydate.render({
            elem: '#calendar',
            btns: [],
            position: 'static',
            done: function (value, date, endDate) {
                $(".search-btn").attr("data-search-time", value);
            }
        });
    })

</script>
</body>

</html>